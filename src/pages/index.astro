---
import BackgoundSquare from "@/components/BackgoundSquare.astro";
import About from "@/components/content/About.astro";
import Educations from "@/components/content/Educations.astro";
import Project from "@/components/content/Project.astro";
import Skills from "@/components/content/Skills.astro";
import Footer from "@/components/Footer.astro";
import Hero from "@/components/Hero.astro";
import LatestProject from "@/components/LatestProject.astro";
import Links from "@/components/Links.astro";
import SiteHeading from "@/components/SiteHeading.astro";
import { SITE } from "@/config";
import Layout from "@/layouts/layout.astro";
import { getCollection } from "astro:content";

const allProject = (await getCollection("projects")).sort(
	(a, b) => new Date(b.data.date) - new Date(a.data.date)
);

let latestProject =
	allProject.filter((project) => project.data.latest || false)[0] || allProject[0];

let newProjects = allProject.slice(0, 3).map((project) => project.data);
---

<Layout title="me" description={SITE.shortDercription}>
	<SiteHeading id="site-heading">
		<Hero>
			<Links
				class="border-primary-content hover:bg-neutral hover:border-neutral hover:text-neutral-content text-content shadow-none"
			/>
		</Hero>
		<div class="mt-14 flex flex-col gap-y-2 md:mt-20">
			<p class="text-2xl font-medium">Latest Project</p>
			<LatestProject project={latestProject.data} />
		</div>
		<BackgoundSquare backgroundText="Portfolio" />
	</SiteHeading>
	<main class="mt-40 mb-20 min-h-screen w-full space-y-20 md:mt-44 md:space-y-24">
		<About />
		<Skills />
		<Educations />
		<Project projects={newProjects} />
		<Footer mail={SITE.email} />
	</main>
</Layout>
